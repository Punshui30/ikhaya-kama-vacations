@import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&family=Fraunces:wght@400;500;600&display=swap');
@import './tokens';
@import './mixins';

* {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

*,
*::before,
*::after {
  box-sizing: border-box;
}

html {
  scroll-behavior: auto;
  overflow-x: hidden;
  // Performance optimizations
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  text-rendering: optimizeLegibility;
}

body {
  font-family: var(--font-sans);
  font-size: var(--fs-sm);
  line-height: 1.6;
  color: var(--ink);
  background-color: #000;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  overflow-x: hidden;
  margin: 0;
  padding: 0;
  -webkit-tap-highlight-color: transparent;
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -khtml-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

/* Mobile optimizations */
@media (max-width: 768px) {
  body {
    font-size: 14px;
    line-height: 1.5;
  }
  
  /* Improve touch targets */
  button, a, [role="button"] {
    min-height: 44px;
    min-width: 44px;
    display: inline-flex;
    align-items: center;
    justify-content: center;
  }
  
  /* Better mobile spacing */
  .container {
    padding-left: 16px;
    padding-right: 16px;
  }
  
  /* Responsive images */
  img {
    max-width: 100%;
    height: auto;
  }
  
  /* Mobile-friendly text selection */
  * {
    -webkit-user-select: text;
    -moz-user-select: text;
    -ms-user-select: text;
    user-select: text;
  }
  
  /* Improve form inputs on mobile */
  input, textarea, select {
    font-size: 16px; /* Prevents zoom on iOS */
  }
}

/* COAST - Ocean/Coastal destinations (Kenya, South Africa coast) */
.theme-coast {
  --c-bg-1:#0097a7;
  --c-bg-2:#fff8ef;
  --c-ink:#0b1a33;
  --c-ink-muted:#3a4a67;
  --c-accent:#ff6f3d;
  --c-accent-ink:#0b0b0b;
}

/* SAFARI - Traditional African safari destinations */
.theme-safari {
  --c-bg-1:#0e3b1f;
  --c-bg-2:#d9c6a3;
  --c-ink:#f2eee6;
  --c-ink-muted:#e2d9c7;
  --c-accent:#f0b100;
  --c-accent-ink:#0b0b0b;
}

/* LUXE - Premium/luxury experiences */
.theme-luxe {
  --c-bg-1:#0a1a33;
  --c-bg-2:#f6f1e8;
  --c-ink:#0a1a33;
  --c-ink-muted:#3b4650;
  --c-accent:#c9a44c;
  --c-accent-ink:#0b0b0b;
}

/* background with texture - ONLY for destination detail pages */
.destination-page {
  background: linear-gradient(180deg, var(--c-bg-1) 0%, var(--c-bg-2) 140%);
  color: var(--c-ink);
}

/* Destination backgrounds moved to DestinationDetail.module.scss */

/* theme-aware UI */
.btn {
  display:inline-flex; align-items:center; gap:8px; padding:10px 16px; border-radius:999px;
  border:1.5px solid var(--c-accent);
  background: var(--c-accent);
  color: var(--c-accent-ink);
  text-decoration:none; font-weight:600;
  box-shadow:0 8px 16px rgba(0,0,0,.25);
  transition: transform .2s ease, box-shadow .2s ease;
}
.btn:hover { transform: translateY(-2px); box-shadow:0 10px 20px rgba(0,0,0,.3); }
.btn--outline { background:transparent; color:var(--c-ink); border-color:var(--c-ink); }
.link-cta { color:var(--c-ink); text-decoration:none; position:relative; font-weight:600; }
.link-cta::after {
  content:""; position:absolute; left:0; right:0; bottom:-2px; height:2px;
  background: var(--c-accent); transform: scaleX(0); transform-origin: left; transition: transform .25s ease;
}
.link-cta:hover::after { transform: scaleX(1); }
.stat-chip {
  display:inline-flex; align-items:center; gap:8px; padding:10px 14px; border-radius:14px;
  background: color-mix(in oklab, var(--c-accent) 18%, transparent);
  border:1px solid color-mix(in oklab, var(--c-accent) 55%, transparent);
  color: var(--c-ink);
}
.card {
  background: color-mix(in oklab, var(--c-bg-2) 88%, white 12%);
  border:1px solid color-mix(in oklab, var(--c-ink) 12%, transparent);
  border-radius:18px; padding:22px; color:var(--c-ink);
  box-shadow:0 12px 22px rgba(0,0,0,.15);
}

/* REMOVED - was conflicting with carousel */

// African Cultural Patterns and Backgrounds
:root {
  // Traditional African patterns
  --africa-pattern: url("data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M12 2L14.5 8.5L21 11L14.5 13.5L12 20L9.5 13.5L3 11L9.5 8.5L12 2Z' fill='%23D4AF37' opacity='0.1'/%3E%3C/svg%3E");
  
  // Kente cloth pattern
  --kente-pattern: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='40' height='40' fill='%23F4F4F4'/%3E%3Crect x='0' y='0' width='8' height='8' fill='%23D4AF37'/%3E%3Crect x='8' y='8' width='8' height='8' fill='%23D4AF37'/%3E%3Crect x='16' y='16' width='8' height='8' fill='%23D4AF37'/%3E%3Crect x='24' y='24' width='8' height='8' fill='%23D4AF37'/%3E%3Crect x='32' y='32' width='8' height='8' fill='%23D4AF37'/%3E%3C/svg%3E");
  
  // Adinkra symbols pattern
  --adinkra-pattern: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Ccircle cx='30' cy='30' r='25' fill='none' stroke='%23D4AF37' stroke-width='1' opacity='0.3'/%3E%3Cpath d='M30 10L35 20L45 20L37 27L40 37L30 32L20 37L23 27L15 20L25 20L30 10Z' fill='%23D4AF37' opacity='0.2'/%3E%3C/svg%3E");
  
  // Maasai-inspired pattern
  --maasai-pattern: url("data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='30' height='30' fill='%23F4F4F4'/%3E%3Crect x='0' y='0' width='30' height='6' fill='%23E74C3C'/%3E%3Crect x='0' y='6' width='30' height='6' fill='%23D4AF37'/%3E%3Crect x='0' y='12' width='30' height='6' fill='%23E74C3C'/%3E%3Crect x='0' y='18' width='30' height='6' fill='%23D4AF37'/%3E%3Crect x='0' y='24' width='30' height='6' fill='%23E74C3C'/%3E%3C/svg%3E");
  
  // Moroccan tile pattern
  --moroccan-pattern: url("data:image/svg+xml,%3Csvg width='50' height='50' viewBox='0 0 50 50' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='50' height='50' fill='%23F8F9FA'/%3E%3Cpath d='M25 5L30 15L40 15L32 22L35 32L25 27L15 32L18 22L10 15L20 15L25 5Z' fill='%23E67E22' opacity='0.3'/%3E%3Ccircle cx='25' cy='25' r='8' fill='none' stroke='%23E67E22' stroke-width='1' opacity='0.4'/%3E%3C/svg%3E");
  
  // Ndebele-inspired pattern
  --ndebele-pattern: url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='40' height='40' fill='%23F4F4F4'/%3E%3Crect x='0' y='0' width='40' height='8' fill='%23E74C3C'/%3E%3Crect x='0' y='8' width='8' height='8' fill='%23D4AF37'/%3E%3Crect x='16' y='8' width='8' height='8' fill='%23D4AF37'/%3E%3Crect x='32' y='8' width='8' height='8' fill='%23D4AF37'/%3E%3Crect x='0' y='16' width='40' height='8' fill='%23E74C3C'/%3E%3Crect x='0' y='24' width='8' height='8' fill='%23D4AF37'/%3E%3Crect x='16' y='24' width='8' height='8' fill='%23D4AF37'/%3E%3Crect x='32' y='24' width='8' height='8' fill='%23D4AF37'/%3E%3Crect x='0' y='32' width='40' height='8' fill='%23E74C3C'/%3E%3C/svg%3E");
}

// Page-specific African Cultural Themes
.page-home {
  // Warm Savannah Theme - Gold and Earth Tones
  --page-accent: #D4AF37; // Gold
  --page-secondary: #8B4513; // Saddle Brown
  --page-highlight: #FFD700; // Bright Gold
  --page-pattern: var(--kente-pattern);
  --page-bg-gradient: linear-gradient(135deg, #FFF8DC 0%, #F5DEB3 50%, #DEB887 100%);
  --page-text-accent: #8B4513;
  --page-border: #D4AF37;
}

.page-destinations {
  // East African Safari Theme - Greens and Earth
  --page-accent: #228B22; // Forest Green
  --page-secondary: #006400; // Dark Green
  --page-highlight: #32CD32; // Lime Green
  --page-pattern: var(--maasai-pattern);
  --page-bg-gradient: linear-gradient(135deg, #F0FFF0 0%, #E6FFE6 50%, #D4F4D4 100%);
  --page-text-accent: #006400;
  --page-border: #228B22;
}

.page-blog {
  // West African Kente Theme - Vibrant Colors
  --page-accent: #FF6347; // Tomato
  --page-secondary: #DC143C; // Crimson
  --page-highlight: #FF4500; // Orange Red
  --page-pattern: var(--kente-pattern);
  --page-bg-gradient: linear-gradient(135deg, #FFF5F5 0%, #FFE4E1 50%, #FFCCCB 100%);
  --page-text-accent: #DC143C;
  --page-border: #FF6347;
}

.page-story {
  // South African Heritage Theme - Deep Reds and Golds
  --page-accent: #E74C3C; // Vibrant Red
  --page-secondary: #C0392B; // Deep Red
  --page-highlight: #A93226; // Dark Red
  --page-pattern: var(--ndebele-pattern);
  --page-bg-gradient: linear-gradient(135deg, #FFF0F0 0%, #FFE6E6 50%, #FFCCCC 100%);
  --page-text-accent: #C0392B;
  --page-border: #E74C3C;
}

.page-services {
  // Moroccan Luxury Theme - Oranges and Golds
  --page-accent: #E67E22; // Dark Orange
  --page-secondary: #D35400; // Deep Orange
  --page-highlight: #F39C12; // Golden Orange
  --page-pattern: var(--moroccan-pattern);
  --page-bg-gradient: linear-gradient(135deg, #FFF8F0 0%, #FFE6CC 50%, #FFD4A3 100%);
  --page-text-accent: #D35400;
  --page-border: #E67E22;
}

.page-contact {
  // Coastal African Theme - Blues and Teals
  --page-accent: #3498DB; // Sky Blue
  --page-secondary: #2980B9; // Deep Blue
  --page-highlight: #5DADE2; // Light Blue
  --page-pattern: var(--adinkra-pattern);
  --page-bg-gradient: linear-gradient(135deg, #F0F8FF 0%, #E6F3FF 50%, #CCE7FF 100%);
  --page-text-accent: #2980B9;
  --page-border: #3498DB;
}

.page-planner {
  // Ethiopian Heritage Theme - Deep Purples and Golds
  --page-accent: #8E44AD; // Royal Purple
  --page-secondary: #7D3C98; // Deep Purple
  --page-highlight: #9B59B6; // Light Purple
  --page-pattern: var(--adinkra-pattern);
  --page-bg-gradient: linear-gradient(135deg, #F8F0FF 0%, #F0E6FF 50%, #E6CCFF 100%);
  --page-text-accent: #7D3C98;
  --page-border: #8E44AD;
}

.page-travel-prep {
  // Desert Nomad Theme - Earth Tones and Browns
  --page-accent: #CD853F; // Peru
  --page-secondary: #A0522D; // Sienna
  --page-highlight: #DEB887; // Burlywood
  --page-pattern: var(--moroccan-pattern);
  --page-bg-gradient: linear-gradient(135deg, #FFF8F0 0%, #F5E6D3 50%, #E6D4B3 100%);
  --page-text-accent: #A0522D;
  --page-border: #CD853F;
}

.page-custom-itineraries {
  // Nigerian Aso-Oke Theme - Rich Purples and Golds
  --page-accent: #6A1B9A; // Deep Purple
  --page-secondary: #4A148C; // Very Dark Purple
  --page-highlight: #9C27B0; // Medium Purple
  --page-pattern: var(--kente-pattern);
  --page-bg-gradient: linear-gradient(135deg, #F3E5F5 0%, #E1BEE7 50%, #CE93D8 100%);
  --page-text-accent: #4A148C;
  --page-border: #6A1B9A;
}

.page-story-explorer {
  // Ancient Egyptian Theme - Golds and Deep Blues
  --page-accent: #D4AF37; // Gold
  --page-secondary: #1E3A8A; // Deep Blue
  --page-highlight: #F59E0B; // Amber
  --page-pattern: var(--adinkra-pattern);
  --page-bg-gradient: linear-gradient(135deg, #FFFBEB 0%, #FEF3C7 50%, #FDE68A 100%);
  --page-text-accent: #1E3A8A;
  --page-border: #D4AF37;
}

// Apply consistent black background to all pages to prevent flashing
body.page-home,
body.page-destinations,
body.page-blog,
body.page-story,
body.page-services,
body.page-contact,
body.page-planner,
body.page-travel-prep,
body.page-custom-itineraries,
body.page-story-explorer {
  background: #000 !important;
}

// Mobile-specific optimizations
@media (max-width: 768px) {
  * {
    -webkit-tap-highlight-color: transparent;
  }
  
  button, a, [role="button"] {
    -webkit-tap-highlight-color: rgba(212, 175, 55, 0.2);
    touch-action: manipulation;
  }
  
  video {
    -webkit-playsinline: true;
    -webkit-media-controls: none;
  }
  
  // Prevent zoom on input focus
  input, textarea, select {
    font-size: 16px;
  }
}

h1, h2, h3, h4, h5, h6 {
  font-family: var(--font-serif);
  font-weight: 600;
  line-height: 1.2;
  color: var(--ink);
}

h1 {
  @include heading-xl;
}

h2 {
  @include heading-lg;
}

h3 {
  @include heading-md;
}

p {
  @include body-text;
  margin-bottom: var(--space-3);
}

a {
  color: var(--brand-3);
  text-decoration: none;
  transition: color var(--transition-fast);
  
  &:hover {
    color: var(--brand-4);
  }
  
  @include focus-visible;
}

button {
  @include focus-visible;
  @include reduced-motion;
}

img {
  max-width: 100%;
  height: auto;
  display: block;
}

/* Override global img reset for postcard images */
.destinations .postcard__inner > img {
  max-width: none !important;
  width: 100% !important;
  height: 100% !important;
  object-fit: cover !important;
}

/* Destination sections should sit on the themed page background */
.destination-page section{
  background: transparent !important;
}

/* Never dim container opacity—use overlays instead */
.destination-page[style*="opacity"],
.services-page[style*="opacity"]{
  opacity: 1 !important;
}

/* ====== DESTINATION HERO VARIABLES ====== */

/* Header height variable */
:root {
  --header-h: 80px;
}

/* South Africa - Pattern background */
.hero--south-africa {
  --hero-bg: url('/images/SouthAfrica_background.png');
  --hero-size: 1600px auto;
  --hero-repeat: repeat-y;
  --hero-pos: center top;
  --overlay-gradient: linear-gradient(120deg, rgba(11,42,58,.95) 0%, rgba(0,0,0,.60) 30%, rgba(242,106,68,.70) 48%, rgba(39,184,178,.90) 100%);
}

/* Zimbabwe - Big diamond motif */
.hero--zimbabwe {
  --hero-bg: url('/images/Zimbabwe_background.jpg');
  --hero-size: 2200px auto;
  --hero-repeat: no-repeat;
  --hero-pos: center 42%;
  --overlay-gradient: linear-gradient(120deg, rgba(15,58,46,.95) 0%, rgba(181,84,57,.65) 50%, rgba(237,178,32,.28) 75%, rgba(15,58,46,.95) 100%);
}

/* All other destinations - use 2880x1080 backgrounds with pattern sizing */
.hero--botswana {
  --hero-bg: url('/images/Botswana_background.jpg');
  --hero-size: 1800px auto;
  --hero-repeat: repeat-y;
  --hero-pos: center top;
  --overlay-gradient: linear-gradient(120deg, rgba(15,58,46,.95) 0%, rgba(181,84,57,.58) 50%, rgba(15,58,46,.95) 100%);
}

.hero--tanzania {
  --hero-bg: url('/images/Tanzania_background.jpg');
  --hero-size: 1800px auto;
  --hero-repeat: repeat-y;
  --hero-pos: center top;
  --overlay-gradient: linear-gradient(120deg, rgba(15,58,46,.95) 0%, rgba(237,178,32,.35) 45%, rgba(181,84,57,.60) 70%, rgba(15,58,46,.95) 100%);
}

.hero--namibia {
  --hero-bg: url('/images/Namibia_background.jpg');
  --hero-size: 1800px auto;
  --hero-repeat: repeat-y;
  --hero-pos: center top;
  --overlay-gradient: linear-gradient(120deg, rgba(15,58,46,.95) 0%, rgba(181,84,57,.60) 50%, rgba(15,58,46,.95) 100%);
}

.hero--uganda {
  --hero-bg: url('/images/Uganda_background.jpg');
  --hero-size: 1800px auto;
  --hero-repeat: repeat-y;
  --hero-pos: center top;
  --overlay-gradient: linear-gradient(120deg, rgba(15,58,46,.95) 0%, rgba(237,178,32,.30) 40%, rgba(181,84,57,.55) 65%, rgba(15,58,46,.95) 100%);
}

.hero--kenya {
  --hero-bg: url('/images/Kenya_background.jpg');
  --hero-size: 1800px auto;
  --hero-repeat: repeat-y;
  --hero-pos: center top;
  --overlay-gradient: linear-gradient(120deg, rgba(11,42,58,.92) 0%, rgba(242,106,68,.45) 45%, rgba(39,184,178,.88) 100%);
}

.hero--morocco {
  --hero-bg: url('/images/Morocco_background.jpg');
  --hero-size: 1800px auto;
  --hero-repeat: repeat-y;
  --hero-pos: center top;
  --overlay-gradient: linear-gradient(120deg, rgba(10,26,58,.92) 0%, rgba(215,185,142,.45) 50%, rgba(31,111,84,.85) 100%);
}

.container {
  @include container;
}

.section {
  @include section-spacing;
}

// Utility classes
.text-center {
  text-align: center;
}

.text-left {
  text-align: left;
}

.text-right {
  text-align: right;
}

.mb-1 { margin-bottom: var(--space-1); }
.mb-2 { margin-bottom: var(--space-2); }
.mb-3 { margin-bottom: var(--space-3); }
.mb-4 { margin-bottom: var(--space-4); }
.mb-6 { margin-bottom: var(--space-6); }
.mb-8 { margin-bottom: var(--space-8); }

.mt-1 { margin-top: var(--space-1); }
.mt-2 { margin-top: var(--space-2); }
.mt-3 { margin-top: var(--space-3); }
.mt-4 { margin-top: var(--space-4); }
.mt-6 { margin-top: var(--space-6); }
.mt-8 { margin-top: var(--space-8); }

.p-1 { padding: var(--space-1); }
.p-2 { padding: var(--space-2); }
.p-3 { padding: var(--space-3); }
.p-4 { padding: var(--space-4); }
.p-6 { padding: var(--space-6); }
.p-8 { padding: var(--space-8); }

// Display text for quotes and testimonials
.display-text {
  @include display-text;
}

// Button styles
.btn-primary {
  @include button-primary;
}

.btn-secondary {
  @include button-secondary;
}

// Card styles
.card {
  @include card;
}

// Pattern overlay
.pattern-overlay {
  @include pattern-overlay;
}

// Cultural background utilities
.cultural-bg {
  background-image: var(--page-pattern);
  background-size: 60px 60px;
  background-repeat: repeat;
  background-position: 0 0;
  opacity: 0.1;
}

.cultural-gradient {
  background: var(--page-bg-gradient);
}

.cultural-border {
  border: 2px solid var(--page-border);
  border-radius: var(--radius);
}

.cultural-text {
  color: var(--page-text-accent);
}

.cultural-accent {
  color: var(--page-accent);
}

.cultural-highlight {
  color: var(--page-highlight);
}

// App container
.app {
  width: 100%;
  overflow-x: hidden;
}

// Responsive utilities
@media (max-width: 768px) {
  .mobile-hidden {
    display: none;
  }
}

@media (min-width: 769px) {
  .desktop-hidden {
    display: none;
  }
}

/* ===== DESTINATIONS TILE CAROUSEL: MOBILE-OPTIMIZED FIXES ===== */

/* 1) Stop the hero from clipping the carousel */
.hero,
.hero-inner,
.hero-grid {
  overflow: visible !important;
  position: relative;
  z-index: 1;
}

/* 2) Base carousel structure */
.destinations-rail {
  position: relative;
  z-index: 3;
}

.carousel-viewport {
  overflow-x: auto;
  overflow-y: hidden;
  -webkit-overflow-scrolling: touch;
  scroll-snap-type: x mandatory;
  scrollbar-width: none;           /* Firefox */
}
.carousel-viewport::-webkit-scrollbar { display: none; }  /* WebKit */

/* Track */
.carousel-track {
  display: flex;
  gap: 16px;
  padding-block: 8px;
}

/* Items */
.carousel-item {
  flex: 0 0 280px;
  scroll-snap-align: start;
}

/* Cards inside items */
.carousel-item .postcard {
  width: 100%;
  max-width: 280px;
}

/* 3) Mobile overrides - the important bit */
@media (max-width: 600px) {
  /* Make the viewport expand edge-to-edge including safe areas */
  .carousel-viewport {
    width: 100vw;
    margin-left: calc(50% - 50vw);   /* kill container padding pushing it off-screen */
    padding-inline: max(16px, env(safe-area-inset-left)) max(16px, env(safe-area-inset-right));
    scroll-padding-inline: 16px;     /* snap to visible edge */
  }

  /* Show ~1 card with a peek of the next, fully in frame */
  .carousel-item {
    flex: 0 0 clamp(78vw, 86vw, 92vw);
    max-width: 420px;
  }

  .carousel-track {
    gap: 12px;
  }
}

/* 4) Ensure no ancestor re-clips it */
@media (max-width: 600px) {
  header, .hero::after {
    pointer-events: auto;           /* avoid intercepting swipes */
  }
  .hero-overlay,
  .pattern-strip {
    z-index: 0;                     /* keep overlays behind carousel */
  }
}

/* 5) Don't let transforms push it off-screen */
.destinations-rail,
.carousel-viewport,
.carousel-track {
  transform: none !important;       /* remove accidental translateX/scale on mobile */
}

/* ===== TITLE CROP FIX FOR SPECIFIC TILES ===== */

/* Base tile structure for carousel */
.destinations-rail .carousel-item {
  aspect-ratio: 16 / 10;        /* existing card shape */
  border-radius: 18px;
  overflow: hidden;
  position: relative;
  flex: 0 0 auto;
}

/* Default behavior for all tiles (square ones like Rwanda stay centered) */
.destinations-rail .carousel-item .postcard .postcard__inner img {
  width: 100%;
  height: 100%;
  object-fit: cover;
  object-position: 50% 50%;     /* center by default */
  display: block;
}

/* Top-focused crop ONLY for flagged tiles (the 4 with baked-in titles) */
.destinations-rail .carousel-item.fix-top .postcard .postcard__inner img {
  object-position: 50% var(--focal-y, 10%); /* nudge the crop down from the top */
}

/* Optional: slightly taller tile for very narrow phones */
@media (max-width: 400px) {
  .destinations-rail .carousel-item {
    aspect-ratio: 17 / 11;
  }
}

/* ===== MOBILE PREVIEW TILES: TOP BIAS FOR TALL IMAGES ===== */

/* Mobile-only rules for preview tiles */
@media (max-width: 768px) {
  /* Make all cards share the same viewport */
  .destinations-rail .carousel-item .postcard {
    aspect-ratio: 4 / 5;      /* matches current card vibe on mobile */
    max-height: 420px;        /* safety cap so text below doesn't jump */
    overflow: hidden;
    border-radius: 18px;
  }

  /* Default crop for most tiles */
  .destinations-rail .carousel-item .postcard img {
    object-fit: cover;
    object-position: center center;
  }

  /* Bias the crop upward ONLY for the 4 tall assets with baked-in titles */
  .destinations-rail .carousel-item .postcard--topTitle img {
    object-position: center 12%;
  }

  /* Fine-tune per country if needed */
  .destinations-rail .carousel-item .postcard[data-slug="south-africa"] img { 
    object-position: center 10%; 
  }
  .destinations-rail .carousel-item .postcard[data-slug="botswana"] img { 
    object-position: center 12%; 
  }
  .destinations-rail .carousel-item .postcard[data-slug="morocco"] img { 
    object-position: center 14%; 
  }
  .destinations-rail .carousel-item .postcard[data-slug="zimbabwe"] img { 
    object-position: center 11%; 
  }
}

/* ========= MOBILE HARD OVERRIDES (keep at the very end) ========= */
@media (max-width: 768px) {

  /* 1) PREVIEW TILES — force a consistent window & crop bias for tall images */
  /* These selectors use high specificity + !important to beat prior rules. */
  .ik-root .destinations,
  .ik-root .destinations-rail,
  .ik-root .carousel-track { overflow: visible !important; }

  .ik-root .postcard {
    aspect-ratio: 4 / 5 !important;
    max-height: 420px !important;
    overflow: hidden !important;
    border-radius: 18px !important;
  }

  .ik-root .postcard img {
    width: 100% !important;
    height: 100% !important;
    display: block !important;
    object-fit: cover !important;
    object-position: center center !important; /* default for square tiles */
  }

  /* Only the 4 tall images: bias upward so baked-in titles show */
  .ik-root .postcard[data-slug="south-africa"] img { object-position: center 10% !important; }
  .ik-root .postcard[data-slug="botswana"]     img { object-position: center 12% !important; }
  .ik-root .postcard[data-slug="morocco"]      img { object-position: center 14% !important; }
  .ik-root .postcard[data-slug="zimbabwe"]     img { object-position: center 11% !important; }

  /* 2) DETAIL HERO CARD — center the card, keep top in view, small dots */
  .ik-root .hero { display: grid !important; place-items: center !important; padding-inline: 16px !important; }

  .ik-root .media-card {
    width: min(92vw, 420px) !important;
    aspect-ratio: 4 / 5 !important;
    margin: 0 auto !important;
    border-radius: 18px !important;
    overflow: hidden !important;
    position: relative !important;
  }

  /* Nuke any rogue width/height hacks Cursor added */
  .ik-root .media-card img,
  .ik-root .media-card picture,
  .ik-root .media-card video {
    width: 100% !important;
    height: 100% !important;
    max-width: 100% !important;
    object-fit: cover !important;
    object-position: center 28% !important; /* slight top bias; adjust +/- 2% if needed */
    transform: none !important;
  }

  /* 3) DOTS — make small, stop scaling */
  .ik-root .carousel-dots,
  .ik-root .swiper-pagination-bullets {
    position: absolute !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    bottom: 10px !important; /* inside the card */
    display: flex !important;
    gap: 6px !important;
    z-index: 2 !important;
  }

  .ik-root .carousel-dots .dot,
  .ik-root .carousel-dots button,
  .ik-root .swiper-pagination-bullet {
    width: 7px !important;
    height: 7px !important;
    border-radius: 50% !important;
    background: rgba(255,255,255,0.85) !important;
    border: 1px solid rgba(0,0,0,0.18) !important;
    opacity: 0.85 !important;
    transform: none !important;
  }

  .ik-root .carousel-dots .dot--active,
  .ik-root .carousel-dots button[aria-current="true"],
  .ik-root .swiper-pagination-bullet-active {
    background: #fff !important;
    opacity: 1 !important;
    transform: none !important; /* kill any library scale-up */
  }

  /* 4) Ensure the hero grid doesn't force two columns on phones */
  .ik-root .hero-grid { display: block !important; }
}

/* Swiper variables for dot sizing */
:root {
  --swiper-pagination-bullet-size: 7px;
  --swiper-pagination-bullet-horizontal-gap: 6px;
}
